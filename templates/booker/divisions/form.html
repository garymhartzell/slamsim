{% extends "_base.html" %}

{% block title %}{% if form_action == 'create' %}Create Division{% else %}Edit Division{% endif %}{% endblock %}

{% block content %}
    <h2>{% if form_action == 'create' %}Create New Division{% else %}Edit Division: {{ division.Name }}{% endif %}</h2>

    <form method="POST" action="{% if form_action == 'create' %}{{ url_for('divisions.create_division') }}{% else %}{{ url_for('divisions.edit_division', division_id=division.ID) }}{% endif %}">
        <div class="form-group">
            <label for="division_id">ID</label>
            <input type="text" id="division_id" name="division_id" value="{{ division.ID | default('') }}" {% if form_action == 'edit' %}readonly{% endif %} required>
            {% if form_action == 'edit' %}<small>ID cannot be changed after creation.</small>{% endif %}
        </div>
        <div class="form-group">
            <label for="name">Name</label>
            <input type="text" id="name" name="name" value="{{ division.Name | default('') }}" required>
        </div>
        <div class="form-group">
            <label for="division_type">Division Type</label>
            <select id="division_type" name="division_type" required>
                <option value="" disabled {% if not division.Holder_Type %}selected{% endif %}>-- Select Type --</option>
                {% for type_option in division_type_options %}
                    <option value="{{ type_option }}" {% if division.Holder_Type == type_option %}selected{% endif %}>{{ type_option }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="status">Status</label>
            <select id="status" name="status" required>
                {% for status in status_options %}
                    <option value="{{ status }}" {% if division.Status == status %}selected{% endif %}>{{ status }}</option>
                {% endfor %}
            </select>
        </div>
        <button type="submit" class="btn btn-primary">{% if form_action == 'create' %}Add Division{% else %}Update Division{% endif %}</button>
        <a href="{{ url_for('divisions.list_divisions') }}">Cancel</a>
    </form>
{% endblock %}
