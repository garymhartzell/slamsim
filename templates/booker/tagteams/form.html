{% extends "booker/_booker_base.html" %}

{% block title %}{% if edit_mode %}Edit Tag-Team{% else %}Create Tag-Team{% endif %}{% endblock %}

{% block content %}
<div class="header-bar">
    <h2>{% if edit_mode %}Edit Tag-Team: {{ tagteam.Name }}{% else %}Create New Tag-Team{% endif %}</h2>
    <div class="action-buttons">
        <a href="{{ url_for('tagteams.list_tagteams') }}">Back to List</a>
    </div>
</div>

<form class="wide-form" method="POST" action="{% if edit_mode %}{{ url_for('tagteams.edit_tagteam', tagteam_name=tagteam.Name) }}{% else %}{{ url_for('tagteams.create_tagteam') }}{% endif %}">
    <div class="form-grid">
        <fieldset class="form-section">
            <legend>Primary Info</legend>
            <div class="form-group">
                <label for="Name">Name <span class="required">*</span></label>
                <input type="text" id="Name" name="Name" value="{{ tagteam.Name | default('') }}" required>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="Status">Status <span class="required">*</span></label>
                    <select id="Status" name="Status" required>
                        {% for option in status_options %}
                        <option value="{{ option }}" {% if tagteam.Status | default('') == option %}selected{% endif %}>{{ option }}</option>
                        {% endfor %}
                    </select>
                    <small>Status will be forced to 'Inactive' if any members are inactive.</small>
                </div>
                <div class="form-group">
                    <label for="Division">Division <span class="required">*</span></label>
                    <select id="Division" name="Division" required>
                        <option value="">-- Select Division --</option>
                        {% for div in divisions %}
                        <option value="{{ div.ID }}" {% if tagteam.Division == div.ID %}selected{% endif %}>{{ div.Name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-group checkbox-group">
                <input type="checkbox" id="hide_from_fan_roster" name="hide_from_fan_roster" {% if tagteam.Hide_From_Fan_Roster %}checked{% endif %}>
                <label for="hide_from_fan_roster">Hide from Fan Mode Roster</label>
                <small>Check this box to exclude this tag-team from the public roster page.</small>
            </div>
        </fieldset>

        <fieldset class="form-section">
            <legend>Members <span class="required">*</span></legend>
            <small>Select at least two members.</small>
            <div class="form-group">
                <label for="Member1">Member 1</label>
                <select id="Member1" name="Member1" required>
                    <option value="">-- Select --</option>
                    {% for wrestler_name in wrestler_names %}
                    <option value="{{ wrestler_name }}" {% if tagteam.Member1 | default('') == wrestler_name %}selected{% endif %}>{{ wrestler_name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="Member2">Member 2</label>
                <select id="Member2" name="Member2" required>
                    <option value="">-- Select --</option>
                    {% for wrestler_name in wrestler_names %}
                    <option value="{{ wrestler_name }}" {% if tagteam.Member2 | default('') == wrestler_name %}selected{% endif %}>{{ wrestler_name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="Member3">Member 3 (Optional)</label>
                <select id="Member3" name="Member3">
                    <option value="">-- Select --</option>
                    {% for wrestler_name in wrestler_names %}
                    <option value="{{ wrestler_name }}" {% if tagteam.Member3 | default('') == wrestler_name %}selected{% endif %}>{{ wrestler_name }}</option>
                    {% endfor %}
                </select>
            </div>
        </fieldset>

        <fieldset class="form-section">
            <legend>Record (Read-Only)</legend>
            <div class="form-row record">
                <div class="form-group">
                    <label>Wins</label>
                    <p class="form-static-text">{{ tagteam.Wins | default('0') }}</p>
                </div>
                <div class="form-group">
                    <label>Losses</label>
                    <p class="form-static-text">{{ tagteam.Losses | default('0') }}</p>
                </div>
                <div class="form-group">
                    <label>Draws</label>
                    <p class="form-static-text">{{ tagteam.Draws | default('0') }}</p>
                </div>
            </div>
        </fieldset>

        <fieldset class="form-section">
            <legend>Details</legend>
            <div class="form-row">
                <div class="form-group">
                    <label for="Location">Location</label>
                    <input type="text" id="Location" name="Location" value="{{ tagteam.Location | default('') }}">
                </div>
                <div class="form-group">
                    <label for="Weight">Combined Weight</label>
                    <input type="text" id="Weight" name="Weight" value="{{ tagteam.Weight | default('') }}">
                </div>
            </div>
            <div class="form-group">
                <label for="Alignment">Alignment</label>
                <select id="Alignment" name="Alignment">
                    <option value="">-- Select Alignment --</option>
                    {% for option in alignment_options %}
                    <option value="{{ option }}" {% if tagteam.Alignment | default('') == option %}selected{% endif %}>{{ option }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="Music">Entrance Music</label>
                <input type="text" id="Music" name="Music" value="{{ tagteam.Music | default('') }}">
            </div>
            <div class="form-group">
                <label for="Moves">Moves (One per line)</label>
                <textarea rows="4" id="Moves" name="Moves">{{ tagteam.Moves | default('') }}</textarea>
            </div>
        <fieldset class="form-section">
            <legend>Affiliations</legend>
            <div class="form-group">
                <label for="faction">Faction</label>
                <input type="text" id="faction" name="faction" value="{{ tagteam.Faction | default('') }}">
            </div>
            <div class="form-group">
                <label for="manager">Manager</label>
                <input type="text" id="manager" name="manager" value="{{ tagteam.Manager | default('') }}">
            </div>
        </fieldset>

            <div class="form-group">
                <label for="Awards">Awards and Accomplishments</label>
                <textarea id="Awards" rows="4" name="Awards">{{ tagteam.Awards | default('') }}</textarea>
            </div>
        </fieldset>
    </div>
    <div class="action-buttons form-actions">
        <button type="submit" class="btn btn-primary">{% if edit_mode %}Update Tag-Team{% else %}Create Tag-Team{% endif %}</button>
        <a href="{{ url_for('tagteams.list_tagteams') }}" class="btn btn-secondary">Cancel</a>
    </div>
</form>
{% endblock %}

